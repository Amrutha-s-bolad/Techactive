{% load rest_framework %}

<!-- Modal -->
<div aria-labelledby="api explorer modal" class="modal fade api-modal" id="{{ section_key }}_{{ link_key|slugify }}_modal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="toggle-view hide">
                    <div class="btn-group" role="group">
                        <button class="btn btn-sm btn-info" data-display-toggle="data" type="button">Data</button>
                        <button class="btn btn-sm" data-display-toggle="raw" type="button">Raw</button>
                    </div>
                </div>

                <h3 class="modal-title"><i class="fa fa-exchange"></i> {{ link.title|default:link_key }}</h3>

            </div>

            <form class="api-interaction" data-key='["{{ section_key }}", "{{ link_key }}"]'>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-6 request">
                            {% form_for_link link %}
                        </div>

                        <hr class="hidden-lg hidden-xl"/>

                        <div class="col-lg-6 response" id="response">
                            <div class="request-awaiting">Awaiting request</div>

                            <div class="meta hide">
                                <span class="label label-primary request-method"></span>
                                <code class="request-url"></code>
                                <label class="label label-lg response-status-code pull-right"></label>
                            </div>

                            <pre class="well response-data hide"></pre>
                            <pre class="well response-raw hide"><div class="response-raw-request"></div><div
                                    class="response-raw-response"></div></pre>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" type="submit">Send Request</button>
                </div>
            </form>

        </div>
    </div>
</div>
